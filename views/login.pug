doctype html
html
  head
    meta(charset='UTF-8')
    meta(name='viewport', content='width=device-width, initial-scale=1.0')
    title Login â€” Grocery Buddy
    link(rel='stylesheet', href='/css/style.css')
    link(rel='stylesheet', href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css')

  body
    .auth-container
      form#loginPage(action="/login" method="POST")

        h2 Login

        - const safeErrors = errors || {}
        - const safeFormData = formData || {}

        if successMessage
          .success-banner #{successMessage}

        if safeErrors.general
          .error-message #{safeErrors.general}

        input(
          type="text"
          name="username"
          placeholder="Username or Email"
          value=safeFormData.username || ''
        )
        if safeErrors.username
          span.error-message #{safeErrors.username}

        .password-group
          .password-wrapper
            input#password(type="password" name="password" placeholder="Password")
            button#togglePassword(type="button")
              i(class="fa-solid fa-eye")
          if safeErrors.password
            span.error-message #{safeErrors.password}

        button(type="submit") Login

        p Don't have an account?
          a(href="/register") Register

    script.
      document.addEventListener('DOMContentLoaded', function() {
        function togglePassword(id, toggleId) {
          const input = document.getElementById(id);
          const toggle = document.getElementById(toggleId);
          const icon = toggle.querySelector('i');
          if (input.type === "password") {
            input.type = "text";
            icon.classList.replace("fa-eye", "fa-eye-slash");
          } else {
            input.type = "password";
            icon.classList.replace("fa-eye-slash", "fa-eye");
          }
        }
        document.getElementById('togglePassword')
          .addEventListener('click', () => togglePassword('password', 'togglePassword'));
      });
