doctype html
html
  head
    meta(charset='utf-8')
    meta(name='viewport' content='width=device-width, initial-scale=1')
    title Login â€” My Grocery Buddy
    link(rel='stylesheet' href='/css/style.css')
    link(rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css")
    // Bootstrap CSS
    link(rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css")
  body
    // Header
    header
      h1 ðŸ›’ My Grocery List

      .header-actions(style="display:flex; align-items:center; gap:20px;")
        // Logout Button  **UPDATED REDIRECT**
        form(action="/" method="GET" style="margin:0;")
          button.logout-btn(type="submit") Logout

    // Login Page
    form#loginPage.center.needs-validation(novalidate method='POST' action='/api/auth/login')
      .card
        h2  Grocery List  ðŸ›’
        input#loginUsername(type='text' name='username' placeholder='Username or Email' required)
        div.invalid-feedback Please enter your username or email.

        // Password input with toggle eye
        .password-wrapper(style="position:relative;")
          input#loginPassword(type='password' name='password' placeholder='Password' required)
          span#togglePasswordLogin.toggle-password(data-input='loginPassword', style="position:absolute; right:10px; top:50%; transform:translateY(-50%); cursor:pointer;")
            i(class="fa fa-eye")
          div.invalid-feedback Please enter your password.

        button#loginBtn(type='submit') Login
        p
          | Donâ€™t have an account?
          a#showRegister(href='/register') Register

    script(src='/js/app.js')
    script.
      // Bootstrap validation
      (function () {
        'use strict';
        const forms = document.querySelectorAll('.needs-validation');
        Array.from(forms).forEach(function (form) {
          form.addEventListener('submit', function (event) {
            if (!form.checkValidity()) {
              event.preventDefault();
              event.stopPropagation();
            }
            form.classList.add('was-validated');
          }, false);
        });
      })();
